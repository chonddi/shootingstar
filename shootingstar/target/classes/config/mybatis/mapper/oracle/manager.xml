<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sql.manager">
<!-- 관리자페이지  -->
	<select id="selectID" parameterType="string" resultType="managerVo">
		select * from admin where adminId=#{adminId}
	</select>
	
	<select id="selectPwdById" parameterType="String" resultType="String">
		select pwd from admin where adminId=#{adminId}
	</select>
	
	<select id="selectNameById" parameterType="String" resultType="String">
		select adminName from admin where adminId=#{adminId}
	</select>
	
	<insert id="insertManager" parameterType="managerVo">
		insert into admin(adminId,adminName,pwd)
		values(#{adminId},#{adminName},#{pwd})
	</insert>
	
	<select id="checkDuplicate" parameterType="String" resultType="int">
		select count(*) from admin
		where adminId=#{adminId}
	</select>

	<update id="adminUpdate" parameterType="managerVo">
		update admin set adminName=#{adminName}
		where adminId=#{adminId} and pwd=#{pwd}
	</update>
	
	<update id="pwdUpdate" parameterType="managerVo">
		update admin set pwd=#{newPwd}
		where adminId=#{adminId}
	</update>
	
<!-- 회원관리 -->
	<select id="memberList" parameterType="String" resultType="memberVO">
		select rownum, memberId, name, pwd, tel, mileage, regdate, outdate 
		from member 
		order by regdate desc
	</select>
	<update id="updateMember" parameterType="memberVo">
		update member set name=#{name}, tel=#{tel}, mileage=#{mileage}
		where memberId=#{memberId}
	</update>
	<update id="memberOut" parameterType="MemberVO">
		update member set outdate=sysdate where memberId=#{memberId}
	</update>
	<update id="memberBack" parameterType="MemberVO">
		update member set outdate=''  where  memberId=#{memberId}
	</update>
	

	<select id="SMemberList" parameterType="String" resultType="SMemberVO">
		select rownum, sMemberId, sName, membership, authority, outdate
		from smember 
		where membership>sysdate
		order by membership
	</select>
	<update id="updateSMember" parameterType="SMemberVo">
		update smember set sName=#{sName},sTel=#{sTel}, pr=#{pr}, zipcode=#{zipcode}, address1=#{address1}, address2=#{address2},
		identification=#{identification}, accountCopy=#{accountCopy}
		where sMemberId=#{sMemberId}
	</update>
	
	<update id="smemberAuOut" parameterType="SMemberVO"> 
		update smember set authority='Y' where  sMemberId=#{sMemberId}
	</update>
	
	<update id="smemberAuBack" parameterType="SMemberVO">
		update smember set authority='N'  where  sMemberId=#{sMemberId}
	</update>
	
	<update id="smemberOut" parameterType="SMemberVO">
		update smember set outdate=sysdate where sMemberId=#{sMemberId}
	</update>
	<update id="smemberBack" parameterType="SMemberVO">
		update smember set outdate=''  where  sMemberId=#{sMemberId}
	</update>
	
	
	<select id="SMemberOutList" parameterType="String" resultType="SMemberVO">
		select rownum, sMemberId, sName, membership, outdate
		from smember 
		where sysdate>=membership
		order by outdate desc
	</select>
</mapper>









